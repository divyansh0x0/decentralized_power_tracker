import math
import random

import requests
import datetime

# url = "http://127.0.0.1:" + input("port: ")
url = "https://decentralized-power-tracker.onrender.com"
body = {
    "iot_id": "IOT-" + str(random.randint(1000, 9999)),
    "recorded_at": str(datetime.datetime.now().isoformat()),
    "latitude": round(random.random() * 100, 3),
    "longitude": round(random.random() * 100, 3),
    "pincode": 1000 + round(random.random() * 100000),
    "power_availability": round(random.random(), 2),
    "number_power_cuts": round(random.random() * 600),
    "number_complaints": round(random.random() * 150),
}
arr = [
    "26.907524,75.739639", "12.120000,76.680000", "24.879999,74.629997", "16.994444,73.300003", "24.794500,73.055000", "21.250000,81.629997", "16.166700,74.833298", "26.850000,80.949997", "28.679079,77.069710", "19.076090,72.877426", "14.167040,75.040298", "26.540457,88.719391", "24.633568,87.849251", "28.440554,74.493011", "24.882618,72.858894", "16.779877,74.556374", "12.715035,77.281296", "13.432515,77.727478", "12.651805,77.208946", "22.728392,71.637077", "9.383452,76.574059", "14.623801,75.621788", "10.925440,79.838005", "15.852792,74.498703", "19.354979,84.986732", "23.905445,87.524620", "20.296059,85.824539", "21.105001,71.771645", "30.172716,77.299492", "25.477585,85.709091", "21.045521,75.801094", "26.491890,89.527100", "8.893212,76.614143", "22.430889,87.321487", "23.849325,72.126625", "11.786253,77.800781", "13.583274,76.540154", "14.530457,75.801094", "18.901457,73.176132", "22.960510,88.567406", "15.756595,76.192696", "22.656015,86.352882", "25.989836,79.450035", "23.223047,82.870560", "19.186354,73.191948", "30.525005,75.890121", "22.422455,85.760651", "18.106659,83.395554", "21.190449,81.284920", "23.597969,72.969818", "28.590361,78.571762", "25.369179,85.530060", "11.623377,92.726486", "24.618393,88.024338", "23.546757,74.433830", "41.643414,41.639900", "25.077787,87.900375", "29.854263,77.888000", "14.913181,79.992981", "14.413745,77.712616", "18.101904,78.852074", "23.173939,81.565125", "15.812074,80.355377", "15.764501,79.259491", "10.311879,76.331978", "21.961946,70.792297", "16.544893,81.521240", "21.049540,76.532028", "26.182245,91.754723", "27.897551,77.384117", "18.245655,76.505356", "23.486839,75.659157", "32.041943,75.405334", "24.474380,85.688744", "23.427221,87.287018", "19.487707,75.380768", "19.853060,74.000633", "15.167409,77.373627", "24.417534,88.250343", "22.744108,77.736969", "14.752805,78.552757", "23.520399,87.311897", "25.771315,73.323685", "28.148735,77.332024", "29.138407,76.693245", "25.375710,86.474373", "20.388794,78.120407", "23.669296,86.151115", "21.761524,70.627625", "22.657402,88.867180", "22.700474,88.319069", "23.344315,85.296013", "14.146319,79.850388", "28.078636,80.471588", "27.108416,78.584602", "9.823619,77.986565", "12.946366,79.959244", "17.143908,79.623924", "13.340881,74.742142", "15.478569,78.483093"
]
for item in arr:
    coord = item.split(',')
    body = {
        "iot_id": "IOT-" + str(random.randint(1000, 9999)),
        "recorded_at": str(datetime.datetime.now().isoformat()),
        "latitude": float(coord[0]),
        "longitude": float(coord[1]),
        "pincode": 1000 + round(random.random() * 100000),
        "is_power_available": random.choice([0,1]) == 1,
        "avg_power_availability": 0.3 + round(random.random()*0.7, 2),
        "avg_power_cuts_count": round(random.random() * 600),
        "complaints_count": round(random.random() * 150),
    }
    print("Sending", body)
    response = requests.post(f"{url}/power-data/", json=body)
    print(response.status_code)
    print(body)
# print(arr)
# response = requests.get(f"{url}/power-data/", json=body)
# print(response.status_code)
# print(response.text)
